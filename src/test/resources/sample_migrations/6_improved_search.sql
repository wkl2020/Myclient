-- add Clusters.subtitle
DROP VIEW "PROGRAMS_SEARCH_RESULT";
CREATE VIEW IF NOT EXISTS "PROGRAMS_SEARCH_RESULT" AS SELECT DISTINCT PROGRAMS._id, PROGRAMS.TITLE, PROGRAMS.SUBTITLE, PROGRAMS.PROGRAM_ID, PROGRAMS.LANGUAGE_ID, BROADCASTS.AIR_TIME, BROADCASTS.AIR_DATE, IMAGES.URL, CLUSTERS.CLUSTER_ID, VIDEOS.WATCH_POSITION, VIDEOS.DURATION, VIDEOS.TYPE, VIDEOS.VIDEO_VIEWS, VIDEOS.RIGHTS_AFTER, VIDEOS.RIGHTS_UNTIL, VIDEOS.GEO_BLOCKING, VIDEOS.GEO_BLOCKING_ORD FROM PROGRAMS INNER JOIN VIDEOS ON PROGRAMS.DEFAULT_VIDEO_ID = VIDEOS.REF_ID LEFT OUTER JOIN BROADCASTS ON PROGRAMS.PROGRAM_ID = BROADCASTS.PROGRAM_ID AND PROGRAMS.LANGUAGE_ID = BROADCASTS.LANGUAGE_ID LEFT OUTER JOIN IMAGES ON PROGRAMS.DEFAULT_IMAGE_ID = IMAGES.IMAGE_ID LEFT OUTER JOIN CLUSTERS ON BROADCASTS.MAIN_CLUSTER_ID = CLUSTERS.CLUSTER_ID GROUP BY PROGRAMS.PROGRAM_ID ORDER BY BROADCASTS.BROADCAST_TIMESTAMP ASC;